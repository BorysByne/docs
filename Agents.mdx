---
title: 'Agents'
description: 'Use Agents to enable an LLM to use tools'
---

## What's in this guide

In this guide, we will go through a slightly more advanced use case, building an Agent application with function-calling.
Function calling is a very useful capability in many latest-gen LLMs, allowing the model to pick what kind of tools it needs to deliver a particular result and then leverage these tools. 

We also support prompt-enforced function calls for older models, but you may need to speak with our migration team about implementing this functionality. 

Here, we will build a simple Agent that's capable of going to Wikipedia to retrieve relevant data for producing an answer. Our Agents come in two forms: the restricted Google Agent
and a free-form API Caller. With Google Agent, you can enable the LLM to do Google Search, and the free-form enables requests to arbitrary APIs.

This guide is also available as a [Colab workbook](https://colab.research.google.com/drive/1vXdyamZ1gmVcZGLF2WKUHNw8OB5xa0es?usp=sharing).

### Define the execution layer
An execution layer is likely the most important part of an Agent. It specifies the schema for the function call, intercepts it, and executes it.
We will create a Google execution layer restricted to Wikipedia:

```python main.py
import requests

KEY = 'YOUR_BYNE_KEY'
headers = {
    'X-API-Key': KEY
}

exec_layer = {
  "name": "WikiSearch", # Name of the layer
  "description": "Find data from Wikipedia.",
  "sourceFabric": {
    "config": {"siteFilter":['wikipedia.org']}, # Choose the scope
    "name": "googleSearch" # Pick the right constructor for the execution layer
  }
}

exec_layer_obj = requests.post('https://app.docs.bynesoft.com/api/users/agents/execution-layers', json=exec_layer, headers=headers).json()
exec_layer_id = exec_layer_obj['id']
```

### Create a template
Templates (also called system commands or system prompts) guide the general behavior of the model. They are particularly
important for Agents as they provide the context explaining when to execute the function call.

```python main.py
template = {
  "template": "You should help users find information. You may call a function to get Wikipedia data. Always use it to make sure you provide relevant advice.",
  "name": "WikiAssistant",
  "type": "llm"
}

template_obj = requests.post('https://app.docs.bynesoft.com/api/ask/templates', json=template, headers=headers).json()
template_id = template_obj['id']
```

### Build an Agent
Now, having created a Template and an Execution Layer, we can combine them to create an Agent.

```python main.py
agent = {
  "name": "WikiAssistant",
  "description": "An Agent that can search Wiki.",
  "templateId": template_id,
  "exeLayers": [
    exec_layer_id
  ],
  "modelType": "GPT-4o"
}


agent_obj = requests.post('https://app.docs.bynesoft.com/api/users/agents', json=agent, headers=headers).json()
agent_id = agent_obj['id']
```

### Generate!

Agents have their own generative endpoint, which is slightly different from RAG. It still uses a KB but doesn't make use of the documents.

```python main.py
params = {
    "kb": "06990a40-d5f8-43b2-8d26-50e515dddd14",
    "q": "Where do polar bears live",
    "withReference": True
}

uri = f'https://dev.docs.bynesoft.com/api/ask/query/agents/{agent_id}'

body = {}

resp = requests.post(uri, json=body, headers=headers, params=params).json()
resp
```

The output should be something like this: 

```json output.json
{'response': {'answer': 'Polar bears inhabit the Arctic and adjacent areas, including Greenland, Canada, Alaska, Russia, and the Svalbard Archipelago of Norway.',
  'reference': [{'exeLayer': '3f1bd462-b6d8-433e-a0d8-c854f441923a',
    'source': 'https://en.wikipedia.org/wiki/Polar_bear'}]},
 'queryId': '6b69ba62-4894-4bbb-bd82-a062e2fcc981',
 'conversationId': '05306183-ae0b-4369-9ec2-dcd12750e428'}
```

You are invited to explore our API reference to explore more advanced execution layers that can connect to free-form APIs
and enable Agents that can interact with company data or industry-specific sources.